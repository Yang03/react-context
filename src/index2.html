<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>App</title>
    <meta name="viewport" content="width=device-width">
    <base href="/" />  
</head>

<body>
    <div id="app">
        <button id="b">B</button>
        <div id="a"></div>
    </div>
    
</body>
<script>
    window.onload = function() {
       //var query = new URLSearchParams(window.location.search)
       document.getElementById('b').addEventListener('click', function(){
         history.pushState({ a: 1 }, 'b', '/src/index2.html?pageId=B')
         setTimeout(function() {
             history.replaceState({ a: 2 }, 'c', '/src/index2.html?pageId=C')
         }, 3000)
       })

       window.onpopstate = function (event) {

            document.getElementById('a').innerHTML = window.location.href;

            //console.log('state: ' + JSON.stringify(event.state));

        };

        window.addEventListener('history', function(){
             document.getElementById('a').innerHTML = window.location.href;
        })
       
    }
</script>
</html>