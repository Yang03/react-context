<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>App</title>
    <meta name="viewport" content="width=device-width">
    <base href="/" />
    <style>
    </style>
</head>

<body>
    <div id="start">
        开始
    </div>
    <div id="result"></div>
    
</body>
<script>
var SpeechRecognition = window.SpeechRecognition
|| window.webkitSpeechRecognition
if (!SpeechRecognition) { 
    alert('好可惜，你的设备不支持语音识别哦')
} else {
    var utterThis = new window.SpeechSynthesisUtterance('你的设备支持语音识别哦！');
    window.speechSynthesis.speak(utterThis);
}

var start = document.getElementById('start')
 var recognition = null
start.addEventListener('click', function() {
    console.log(recognition)
    if (recognition) {
        recognition.stop()
        console.log('ffffff')
        recognition = null
        start.innerHTML= '开始'
        return 
    }
    start.innerHTML= '结束'
    recognition= new SpeechRecognition()
    recognition.continuous = true;
    recognition.lang = 'zh-CN'
    recognition.onresult = function(event) {
        // recognition = null
        console.log('xddddddddd')
        var count = event.results.length - 1
        var length = event.results[count].length - 1
        var content = event.results[count][length].transcript
        document.getElementById('result').innerHTML = content
    }

    recognition.onspeechend = function() {
        recognition.stop();
    }

})


</script>
</html>